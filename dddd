import pandas as pd
from scipy.stats import shapiro, ttest_ind

# CSV 파일 불러오기
df = pd.read_csv('student_scores.csv')

# 성별에 따라 점수 분리
male_scores = df[df["Gender"] == "Male"]["Score"]
female_scores = df[df["Gender"] == "Female"]["Score"]

# 정규성 검정 (Shapiro-Wilk Test)
shapiro_male = shapiro(male_scores)
shapiro_female = shapiro(female_scores)

print("✅ Shapiro-Wilk Test (정규성 검정)")
print(f"남학생: statistic = {shapiro_male.statistic:.3f}, p-value = {shapiro_male.pvalue:.3f}")
print(f"여학생: statistic = {shapiro_female.statistic:.3f}, p-value = {shapiro_female.pvalue:.3f}")

# 독립표본 t-검정 (Unpaired Student's t-test)
t_test_result = ttest_ind(male_scores, female_scores)

print("\n✅ Unpaired Student's t-test")
print(f"t-statistic = {t_test_result.statistic:.3f}, p-value = {t_test_result.pvalue:.3f}")

# 해석
if t_test_result.pvalue < 0.05:
    print("➤ 평균에 통계적으로 유의미한 차이가 있습니다. (귀무가설 기각)")
else:
    print("➤ 평균에 유의미한 차이가 없습니다. (귀무가설 채택)")
